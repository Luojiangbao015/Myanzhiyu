<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>ue5API | 凝雨个人博客</title><meta name="keywords" content="学习,变量"><meta name="author" content="凝雨"><meta name="copyright" content="凝雨"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="ue5API"><meta name="application-name" content="ue5API"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="ue5API"><meta property="og:url" content="http://example.com/2024/03/30/ue5/%E5%8F%98%E9%87%8F/API/index.html"><meta property="og:site_name" content="凝雨个人博客"><meta property="og:description" content="​"><meta property="og:locale" content="en"><meta property="og:image" content="https://files.wujicode.cn/w/open/dnf_universe_app/6ji052de.jpg?_r_=33d88012-e2cc-4f13-25c7-0925fac02644"><meta property="article:author" content="凝雨"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://files.wujicode.cn/w/open/dnf_universe_app/6ji052de.jpg?_r_=33d88012-e2cc-4f13-25c7-0925fac02644"><meta name="description" content="​"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2024/03/30/ue5/%E5%8F%98%E9%87%8F/API/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"与数百名博主无限进步","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"tianli","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: {"apiurl":"https://friends.anheyu.com/"},
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"Author: 凝雨","link":"Link: ","source":"Source: 凝雨个人博客","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.","copySuccess":"Copy success, copy and reprint please mark the address of this article"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '凝雨个人博客',
  title: 'ue5API',
  postAI: '',
  pageFillDescription: '组件, 加载静态网格体资源, 添加骨骼网格体, 获取玩家对象, 类UGameplayStatics, 朝玩家移动, 遍历世界的物体, 类, 玩家类, 角色移动组件Pawn, 碰撞, 变换向量, 旋转, GetUnitDirection      获取一个位置到一个位置的旋转向量, 用户控件, 渲染变换相关, 流向方向偏好, 启用状态, 是否在视口中, 提示文本, 鼠标光标, 渲染状态, 主要功能和特性：, 枚举类型：, 结构体：, 其他：, 绑定UI和动画, 数据表格, FTableRowBase 结构体, 成员函数, UDataTable 类, 成员变量, 成员函数, FDataTableRowHandle 结构体, 成员变量, 成员函数, FDataTableCategoryHandle 结构体, 成员变量, 成员函数组件组件组件的声明及应用实例组件设置为根组件父级切换组件层级以下两个在调用后可以不用注册组件添加组件进数组按类查找组件直接访问公开的成员变量就是组件你已经给定了变量来存储使用标签查找设置组件是否可见传入表示显示表示隐藏设置组件在世界空间中的位置设置组件在世界空间中的旋转设置组件在世界空间中的缩放比例在组件的本地坐标系下添加一个偏移量第二个参数决定是否更新组件的物理状态在组件的本地坐标系下添加一个旋转增量第二个参数决定是否更新组件的物理状态设置组件相对于其父组件的位置设置组件相对于其父组件的旋转控制组件的碰撞检测模式如禁用查询或物理模拟改变组件的碰撞配置文件用于定义组件的碰撞行为将当前组件附加到指定的父组件上并可自定义附加规则如是否保持相对位置旋转等从父组件上分离当前组件如果参数为则保持当前位置和旋转否则重置到组件的初始变换开启或关闭组件的物理模拟使组件受到物理引擎的影响更改组件材质的某一索引处的材质获取组件所属的源文件构造函数添加到对象加载静态网格体资源加载资源组件名字添加组件父级设置静态网格添加骨骼网格体设置旋转设置位置设置网格体获取玩家对象获取玩家控制器和玩家的判断玩家引用是否有效未能获取到类是中的一个静态类提供了一些便捷的静态方法帮助开发者在游戏中执行常见的操作比如获取游戏实例玩家控制器播放声音生成粒子效果等它主要用于简化一些重复性操作避免直接操作底层主要功能以下是常见的一些功能获取玩家控制器例如可以获取当前玩家的控制器获取玩家角色还有一个方法可以直接获取到第一个玩家的角色生成对象使用如来在世界中生成新的对象例如生成子弹或敌人播放声音音乐可以通过播放指定位置的声音等蓝图与的交互提供的方法可在蓝图中使用方便设计师与程序员协作朝玩家移动获取玩家的位置设置当前的位置朝玩家位置移动这里可以使用简单的插值移动或直接设置位置是控制移动速度的因子旋转面朝玩家在中有许多常用的类用于不同的游戏开发需求以下是一些常见的重要类及其简要说明以下是将上述内容整理成表格的形式以便更清晰地查看和比较这些中常用的类及其简要说明类名简要说明所有游戏对象的基类可以放置在关卡中它是所有可以在世界中被实例化的对象的基础表示一个可控制的游戏实体可以是玩家角色或角色提供移动和控制的功能的子类适用于需要复杂移动如跳跃滑行等的角色它通常用于玩家角色并集成了动画组件代表玩家的控制器用于处理玩家输入相机控制和与游戏逻辑的交互定义游戏规则胜利条件以及玩家生成的逻辑一个关卡只能有一个游戏模式用于保存游戏的状态信息允许所有客户端在网络游戏中访问相同的游戏状态数据存储与个别玩家及其状态相关的信息比如分数生命值等每个玩家控制器都有一个对应的实例所有组件类的基类用于给添加功能如运动碰撞渲染等用于在世界中显示静态网格模型通常用于表示环境中的物体用于显示具有骨骼动画的网格通常用于角色模型允许其执行动画通常用于角色的碰撞检测帮助其处理地面墙壁等显示和逻辑动画实例类用于控制角色的动画状态和过渡允许开发者实现复杂的动画逻辑可视化脚本系统用于实现游戏逻辑无需编写代码它可以代表任何类型允许设计师和程序员协作用于处理纹理常用于界面元素或游戏对象的外观一个音频资产的基类所有音效和背景音乐都从这个类派生用于定义表面属性和视觉效果的类包括颜色纹理和光照等环境类允许在环境中引入动态光源和其他视觉效果用于处理物理效果的组件可以用于模拟重力碰撞和其他物理现象这个表格提供了中一些常见和重要的类的快速概览有助于理解这些类在游戏开发中的作用和关系不一定非要将敌人数组放在游戏模式中虽然游戏模式是一种常见的做法根据你的游戏设计和需求你可以选择以下几个比较适合的方案游戏模式如果敌人在整个游戏的不同关卡中都是共享的你可以将敌人数组放在游戏模式中这是一个便于全球管理敌人的方式自定义关卡类如前所述你可以创建一个自定义的关卡类继承自将敌人数组放在这个类中这样你可以针对每个关卡进行特定的敌人管理敌人生成器如果你有复杂的敌人生成逻辑可以创建一个独立的敌人生成器类来管理敌人这可以让敌人生成和管理更加模块化角色类尽管不太常见但如果你的角色需要跟特定的敌人进行交互或者影响你可以在角色类中持有敌人数组全局单例或管理器如果你的游戏架构较为复杂可以考虑使用单例模式或管理器类它们可以在游戏中完成敌人的全局管理总结虽然将敌人数组放在游戏模式是一个常见且有效的方案但根据你的实际需求和游戏结构你可以选择最适合你的方案考虑到扩展性和代码组织选择一个易于管理和维护的方法是很重要的如果你有具体的场景或设计考虑请告诉我我可以提供更具体的建议遍历世界的物体定义日志类别设置碰撞胶囊的大小不会因控制器旋转而旋转角色让控制器只影响相机配置角色移动角色向输入方向移动在该旋转速率下移动注意为了更快的迭代时间这些变量和许多其他参数可以在角色蓝图中调整而无需重新编译跳跃时的竖直速度空中控制能力最大行走速度最小模拟行走速度行走时刹车减速下落时刹车减速创建相机弹簧臂当发生碰撞时向玩家靠拢相机在角色后方跟随的距离根据控制器旋转弹簧臂创建跟随相机将相机附加到弹簧臂的末端并让弹簧臂根据控制器方向进行调整相机不相对于弹簧臂旋转注意在继承的组件上骨骼网格和动画蓝图的引用在名为的派生蓝图资产中设置以避免在中直接引用内容调用基类添加输入映射上下文输入处理设置动作绑定跳跃移动视角控制找不到增强输入组件此模板是建立在增强输入系统上如果您打算使用传统系统则需要更新此文件输入是一个找出前方方向获取前方向向量获取右方向向量添加移动前进后退左右移动输入是一个将偏航和俯仰输入添加到控制器左右看上下看前向声明类声明日志类别相机弹簧臂将相机定位在角色后方跟随相机输入映射上下文跳跃输入动作移动输入动作视角输入动作构造函数处理移动输入的函数处理视角输入的函数接口设置输入组件添加映射上下文初始化函数返回子对象返回子对象类玩家类角色移动组件属性属性描述速度推荐移动角色方法类似也可以通过实现碰撞碰撞检测与命中测试使用方法为玩家角色或其攻击组件添加一个碰撞体如或并启用重叠事件或使用线性投射进行命中测试实现细节在蓝图中可以设置或事件处理函数来检测玩家与敌人的碰撞如果是则需要覆写相关组件的或等函数视线投射使用方法当玩家按下攻击键时从玩家视角发出一条射线检测这条射线是否击中了敌人实现细节可以使用蓝图中的节点或者在中使用函数根据返回的结果判断是否击中敌人并获取击中对象的信息感知系统使用方法为敌人添加感知组件定义它们的感知范围和条件然后在玩家身上添加相应的标签敌人通过感知组件检查范围内是否有带有特定标签的玩家实现细节配置敌人蓝图中的感知组件如并在玩家蓝图中设置相应的感知标签通过感知委托处理感知到玩家的逻辑基于脚本的行为树使用方法创建一个行为树其中包含一个用于寻找玩家节点该节点利用上述的碰撞检测或视线投射机制来定位玩家实现细节在编辑器中设计行为树使用蓝图或编写具体逻辑例如可以使用节点并在成功找到玩家后触发其他行为如追击或攻击事件调度器使用方法利用的事件系统在玩家到达特定位置或满足特定条件时触发一个全局或局部事件敌人对象监听这个事件并作出反应实现细节可以创建自定义事件在玩家达到某些条件时广播该事件敌人蓝图或代码中注册监听这些事件并执行相应的逻辑来响应玩家的动作变换向量旋转获取一个位置到一个位置的旋转向量目标相对位置向前向量乘以距离自身位置平均旋转除以箭头数量箭头度数等于上一个箭头加上平均值用户控件当然以下是类中部分的用途翻译渲染变换相关获取小部件的渲染变换设置小部件的渲染变换设置小部件的渲染缩放设置小部件的渲染剪切设置小部件的渲染旋转角度获取小部件的渲染旋转角度设置小部件的渲染平移设置小部件的渲染变换中心点获取小部件的渲染变换中心点流向方向偏好获取小部件的流向方向偏好设置小部件的流向方向偏好启用状态获取小部件当前的启用状态设置小部件当前的启用状态是否在视口中返回小部件是否已通过或添加到视口中提示文本获取小部件的提示文本设置小部件的提示文本获取小部件的自定义提示小部件设置小部件的自定义提示小部件鼠标光标获取小部件上的鼠标光标设置小部件上的鼠标光标重置小部件上的鼠标光标移除任何自定义设置渲染状态返回小部件是否可见且渲染透明度大于返回小部件是否可见命中测试不可见或自身命中测试不可见获取小部件当前的可见性设置小部件的可见性内部方法用于设置小部件的可见性这些主要用于控制和获取小部件的各种属性和状态以便在用户界面中进行动态调整和响应提供的文件是版本中的一个头文件定义了类这个类是中用于创建用户界面的基础类支持通过蓝图进行扩展主要功能和特性继承关系继承自和提供了基本的功能和命名插槽接口生命周期方法初始化时调用仅在游戏运行时调用一次构造前调用适用于编辑器预览和运行时小部件构造后调用小部件销毁时调用输入事件处理获取焦点时调用失去焦点时调用添加到焦点路径时调用从焦点路径中移除时调用接收到字符输入时调用预览按键按下事件按键按下事件按键释放事件模拟值变化事件鼠标按钮按下事件预览鼠标按钮按下事件鼠标按钮释放事件鼠标移动事件鼠标进入小部件时调用鼠标离开小部件时调用鼠标滚轮事件其他方法将小部件添加到视口中将小部件添加到玩家屏幕设置小部件在视口中的位置设置小部件在视口中的大小设置小部件在视口中的锚点设置小部件在视口中的对齐方式设置小部件的可见性设置玩家上下文获取拥有该小部件的本地玩家获取拥有该小部件的玩家控制器获取拥有该小部件的玩家角色获取拥有该小部件的玩家状态获取拥有该小部件的玩家相机管理器枚举类型定义了小部件的更新频率定义了动画事件类型定义了序列的播放模式定义了设计预览的尺寸模式结构体用于管理动画事件绑定用于绘制上下文用于命名插槽绑定其他获取当前世界复制后调用开始销毁时调用加载后调用从小部件树中复制并初始化初始化小部件获取期望的更新频率获取生成小部件树的蓝图类更新是否可以更新这些功能和特性使得成为中创建和管理用户界面的重要基础类绑定和动画物品箱子用于包裹小格子容器的组件获取小格子组件事件发送出去小格子容器小格子容器动画绑定动画数据表格读取行获取命名数组结构体成员函数可以被子类重写当数据表导入或重新导入时调用允许对初始读取的数据进行自定义修复解析等操作参数拥有此行的数据表要进行修复的行的名称导入过程中累积的问题列表可以通过此方法添加问题可以被子类重写当拥有此行的数据表被修改时调用允许对用户更改进行自定义修复解析等操作参数拥有此行的数据表要进行修复的行的名称类成员变量数据表中每一行使用的结构体必须继承自行名称到行数据结构的映射如果设置为则不会将此数据表打包到客户端构建中适用于只有服务器需要知道的敏感表如果设置为则在导入数据时忽略多余的字段否则会发出警告如果设置为则在导入数据时忽略预期但缺失的字段否则会发出警告导入数据中的显式键字段如果为空则使用中的或中的第一个字段作为键导入此数据表的文件可能为空当数据表发生变化时调用的多播委托成员函数向数据表中添加行从数据表中删除行获取行映射获取行结构体返回是否允许在导入时存在多个同名行完成销毁序列化数据表添加引用对象获取预加载依赖项获取资源大小判断是否需要在客户端加载判断是否需要在编辑器游戏中加载当数据表数据发生变化时调用此方法触发委托和每行回调获取数据表中的所有行根据名称查找数据表中的行对每一行执行某个操作查找与列属性名称匹配的属性高性能版本不进行类型检查清空数据表不会清除获取所有行的名称通过名称删除单个行将行数据复制到数据表中在结构体更改前清理在结构体更改后恢复将整个数据表输出为字符串将整个数据表输出为格式将整个数据表输出为格式将整个数据表输出为格式并写入写入器将整个数据表输出为对象并写入写入器将特定行的字段输出为格式并写入写入器复制另一个数据表的导入选项不复制行数据从格式的字符串创建数据表从格式的字符串创建数据表从另一个数据表创建数据表从原始数据映射和给定的脚本结构创建数据表获取所有列标题使用属性的友好显示名称获取所有列标题使用属性的唯一名称获取每个行的数据数组第一行是标题保存结构体数据加载结构体数据当新数据导入数据表时调用通知每个导入的行并给行结构体一个操作导入数据的机会获取空的结构体结构体成员变量指向我们要获取行的数据表我们要获取的行的名称成员函数如果此句柄未指向任何内容返回从行句柄中获取行从行句柄中获取行返回调试字符串判断两个行句柄是否相等判断两个行句柄是否不相等序列化后调用结构体成员变量指向我们要获取行的数据表我们要获取的列的名称我们要获取的行的内容成员函数如果此句柄未指向任何内容返回在数据表中搜索所有包含的行并将它们添加到中判断两个类别句柄是否相等判断两个类别句柄是否不相等',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-03-15 14:03:57',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/RR.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://space.bilibili.com/253251579" title="哔哩哔哩"><img class="back-menu-item-icon" src="https://th.bing.com/th?id=ODLS.1e67f861-d980-4c01-ba66-9450f90172f4&amp;w=32&amp;h=32&amp;qlt=96&amp;pcl=fffffc&amp;o=6&amp;cb=15&amp;pid=1.2" alt="哔哩哔哩"/><span class="back-menu-item-text">哔哩哔哩</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blender.kim/" title="魔酷网"><img class="back-menu-item-icon" src="https://th.bing.com/th?id=ODLS.88012746-d99b-4589-a17c-d5eeaad474fd&amp;w=32&amp;h=32&amp;qlt=99&amp;pcl=fffffc&amp;o=6&amp;cb=15&amp;pid=1.2" alt="魔酷网"/><span class="back-menu-item-text">魔酷网</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.aplaybox.com/" title="模之屋"><img class="back-menu-item-icon" src="https://th.bing.com/th?id=ODLS.221b96bc-0e7f-4f7d-b980-a051789b763b&amp;w=32&amp;h=32&amp;qlt=90&amp;pcl=fffffa&amp;o=6&amp;cb=15&amp;pid=1.2" alt="模之屋"/><span class="back-menu-item-text">模之屋</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://huaban.com/follow" title="花瓣"><img class="back-menu-item-icon" src="https://th.bing.com/th?id=ODLS.9e0310ad-0fa0-486f-8c12-81bcf016e199&amp;w=32&amp;h=32&amp;qlt=98&amp;pcl=fffffc&amp;o=6&amp;cb=15&amp;pid=1.2" alt="花瓣"/><span class="back-menu-item-text">花瓣</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.zhihu.com/people/35-4-25-32" title="知乎"><img class="back-menu-item-icon" src="https://th.bing.com/th?id=ODLS.66059014-8637-4840-b8a6-78e2a6e07c34&amp;w=17&amp;h=17&amp;o=6&amp;cb=15&amp;pid=1.2" alt="知乎"/><span class="back-menu-item-text">知乎</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">凝雨个人博客</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/htim/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> Search</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/img/ds.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="/img/ds.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/ds.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="/img/ds.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> Newest Comments</span></div><div class="aside-list"><span>loading...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/%E5%8F%98%E9%87%8F/" style="font-size: 1.05rem;">变量<sup>5</sup></a><a href="/tags/%E5%A4%87%E5%BF%98%E5%BD%95/" style="font-size: 1.05rem;">备忘录<sup>1</sup></a><a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">学习<sup>35</sup></a><a href="/tags/%E8%84%9A%E6%9C%AC/" style="font-size: 1.05rem;">脚本<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">March 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">31</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">March 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/ue5/" itemprop="url">ue5</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E5%AD%A6%E4%B9%A0/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>学习</span></a><a class="article-meta__tags" href="/tags/%E5%8F%98%E9%87%8F/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>变量</span></a></span></div></div><h1 class="post-title" itemprop="name headline">ue5API</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-03-29T16:17:59.000Z" title="Created 2024-03-30 00:17:59">2024-03-30</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-03-15T06:03:57.104Z" title="Updated 2025-03-15 14:03:57">2025-03-15</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">Word count:</span><span class="word-count" title="文章字数">6.9k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">Reading time:</span><span>25min</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="ue5API"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">Post View:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为贵州"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>贵州</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://files.wujicode.cn/w/open/dnf_universe_app/6ji052de.jpg?_r_=33d88012-e2cc-4f13-25c7-0925fac02644"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2024/03/30/ue5/%E5%8F%98%E9%87%8F/API/"><header><a class="post-meta-categories" href="/categories/ue5/" itemprop="url">ue5</a><a href="/tags/%E5%AD%A6%E4%B9%A0/" tabindex="-1" itemprop="url">学习</a><a href="/tags/%E5%8F%98%E9%87%8F/" tabindex="-1" itemprop="url">变量</a><h1 id="CrawlerTitle" itemprop="name headline">ue5API</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">凝雨</span><time itemprop="dateCreated datePublished" datetime="2024-03-29T16:17:59.000Z" title="Created 2024-03-30 00:17:59">2024-03-30</time><time itemprop="dateCreated datePublished" datetime="2025-03-15T06:03:57.104Z" title="Updated 2025-03-15 14:03:57">2025-03-15</time></header><p>​                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </p>
<h1 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h1><pre><code>## 组件API
</code></pre>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//组件的声明及应用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//实例组件</span></span><br><span class="line">StaticMeshComponent=<span class="built_in">CreateDefaultSubobject</span>&lt;UStaticMeshComponent&gt;(<span class="string">&quot;AuraStaticMeshComponent&quot;</span>);</span><br><span class="line"><span class="built_in">SetRootComponent</span>(StaticMeshComponent);  <span class="comment">//设置为根组件</span></span><br><span class="line">SkeletalMeshComponent-&gt;<span class="built_in">SetupAttachment</span>(父级);  <span class="comment">//切换组件层级</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//以下两个在调用SetupAttachment后可以不用</span></span><br><span class="line"><span class="comment">//注册组件</span></span><br><span class="line">SkeletalMeshComponent-&gt;<span class="built_in">RegisterComponent</span>()</span><br><span class="line"><span class="comment">//添加组件进数组</span></span><br><span class="line"><span class="built_in">AddInstanceComponent</span>(SkeletalMeshComponent);</span><br><span class="line"></span><br><span class="line"><span class="comment">//按类查找组件</span></span><br><span class="line"><span class="built_in">FindComponentByClass</span>()</span><br><span class="line">UMyCustomComponent* MyComponent = <span class="built_in">FindComponentByClass</span>(MyActor, UMyCustomComponent::<span class="built_in">StaticClass</span>());</span><br><span class="line"><span class="comment">//直接访问公开的成员变量</span></span><br><span class="line">就是组件你已经给定了变量来存储</span><br><span class="line"><span class="comment">//使用Tag标签查找</span></span><br></pre></td></tr></table></figure>

<p>SetVisibility(bool): 设置组件是否可见。传入true表示显示，false表示隐藏。<br>SetWorldLocation(FVector): 设置组件在世界空间中的位置。<br>SetWorldRotation(FRotator): 设置组件在世界空间中的旋转。<br>SetWorldScale3D(FVector): 设置组件在世界空间中的缩放比例。<br>AddLocalOffset(FVector, bool): 在组件的本地坐标系下添加一个偏移量。第二个参数决定是否更新组件的物理状态。<br>AddLocalRotation(FRotator, bool): 在组件的本地坐标系下添加一个旋转增量。第二个参数决定是否更新组件的物理状态。<br>SetRelativeLocation(FVector): 设置组件相对于其父组件的位置。<br>SetRelativeRotation(FRotator): 设置组件相对于其父组件的旋转。<br>SetCollisionEnabled(ECollisionEnabled::Type): 控制组件的碰撞检测模式，如禁用、查询或物理模拟。<br>SetCollisionProfileName(FName): 改变组件的碰撞配置文件，用于定义组件的碰撞行为。<br>AttachToComponent(UPrimitiveComponent, FAttachmentTransformRules, FName)<em>: 将当前组件附加到指定的父组件上，并可自定义附加规则（如是否保持相对位置、旋转等）。<br>DetachFromParent(bool): 从父组件上分离当前组件。如果参数为true，则保持当前位置和旋转；否则，重置到组件的初始变换。<br>SetSimulatePhysics(bool): 开启或关闭组件的物理模拟，使组件受到物理引擎的影响。<br>SetMaterial(int32, UMaterialInterface)</em>: 更改组件材质的某一索引处的材质。<br>GetOwner(): 获取组件所属的Actor。</p>
<ul>
<li>源文件</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Myclass::构造函数</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//添加到对象</span></span><br><span class="line">    myclass = CreateDefaultSubobject&lt;USceneCo</span><br></pre></td></tr></table></figure>

<h1 id="加载静态网格体资源"><a href="#加载静态网格体资源" class="headerlink" title="加载静态网格体资源"></a>加载静态网格体资源</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	<span class="built_in">UPROPERTY</span>(EditInstanceOnly, Category = <span class="string">&quot;StaticMesh&quot;</span>)</span><br><span class="line">	UStaticMeshComponent* StaticMeshComponent;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">static</span> 	ConstructorHelpers::FObjectFinder&lt;UStaticMesh&gt;<span class="built_in">Cube</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;/Script/Engine.StaticMesh&#x27;/Game/StarterContent/Shapes/Shape_Tube.Shape_Tube&#x27;&quot;</span>)); <span class="comment">//加载资源</span></span><br><span class="line">StaticMeshComponent = <span class="built_in">CreateDefaultSubobject</span>&lt;UStaticMeshComponent&gt;(<span class="built_in">TEXT</span>(<span class="string">&quot;name&quot;</span>)); <span class="comment">//组件名字</span></span><br><span class="line">StaticMeshComponent-&gt;<span class="built_in">SetupAttachment</span>(RootComponent);     <span class="comment">//添加组件 RootComponent父级</span></span><br><span class="line">StaticMeshComponent-&gt;<span class="built_in">SetStaticMesh</span>(Cube.Object);         <span class="comment">//设置静态网格</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="添加骨骼网格体"><a href="#添加骨骼网格体" class="headerlink" title="添加骨骼网格体"></a>添加骨骼网格体</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">USkeletalMesh*Skletamesh;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">construct</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CreateMode</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">construct</span><span class="params">()</span></span>;&#123;</span><br><span class="line">  Skletamesh=<span class="built_in">LoadObject</span>&lt;USkeletalMesh&gt;(<span class="literal">NULL</span>,<span class="built_in">TEXT</span>(CHAT));  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CreateMode</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">GetMesh</span>()-&gt;设置旋转(); <span class="number">0</span>,<span class="number">-90</span>,<span class="number">0</span></span><br><span class="line"><span class="built_in">GetMesh</span>()-&gt;设置位置(); <span class="number">0</span>,<span class="number">0</span>,<span class="number">-100</span></span><br><span class="line"><span class="built_in">GetMesh</span>()-&gt;<span class="built_in">SetSkeletaMesh</span>(Skletamesh); <span class="comment">//设置网格体</span></span><br><span class="line"><span class="built_in">GetCapsuleComponent</span>()-&gt;<span class="built_in">InitCapsuleSize</span>(<span class="number">4.</span>,<span class="number">100</span>)   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="获取玩家对象"><a href="#获取玩家对象" class="headerlink" title="获取玩家对象"></a>获取玩家对象</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取玩家控制器和玩家的Pawn</span></span><br><span class="line">APlayerController* PlayerController = UGameplayStatics::<span class="built_in">GetPlayerController</span>(<span class="keyword">this</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">//判断玩家引用是否有效</span></span><br><span class="line"><span class="keyword">if</span> (PlayerController)</span><br><span class="line">&#123;</span><br><span class="line">	APawn* Pawn = PlayerController-&gt;<span class="built_in">GetPawn</span>();</span><br><span class="line">	<span class="keyword">if</span> (Pawn)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;PlayerController:%s, Pawn:%s&quot;</span>), *PlayerController-&gt;<span class="built_in">GetName</span>(), *Pawn-&gt;<span class="built_in">GetName</span>());</span><br><span class="line">	&#125;<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;PlayerController:%s, Pawn:NULL&quot;</span>), *PlayerController-&gt;<span class="built_in">GetName</span>());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;未能获取到 PlayerController&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="类-UGameplayStatics"><a href="#类-UGameplayStatics" class="headerlink" title="类:UGameplayStatics"></a>类:UGameplayStatics</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">UGameplayStatics 是 Unreal Engine 中的一个静态类，提供了一些便捷的静态方法，帮助开发者在游戏中执行常见的操作，比如获取游戏实例、玩家控制器、播放声音、生成粒子效果等。它主要用于简化一些重复性操作，避免直接操作底层 API。</span><br><span class="line"></span><br><span class="line">主要功能</span><br><span class="line">以下是 UGameplayStatics 常见的一些功能：</span><br><span class="line"></span><br><span class="line">获取玩家控制器：例如，UGameplayStatics::GetPlayerController 可以获取当前玩家的控制器。</span><br><span class="line"></span><br><span class="line">获取玩家角色：还有一个方法 UGameplayStatics::GetPlayerPawn，可以直接获取到第一个玩家的角色（Pawn）。</span><br><span class="line"></span><br><span class="line">生成对象：使用如 UGameplayStatics::SpawnActor 来在世界中生成新的对象（例如生成子弹或敌人）。</span><br><span class="line"></span><br><span class="line">播放声音/音乐：可以通过 UGameplayStatics::PlaySoundAtLocation 播放指定位置的声音等。</span><br><span class="line"></span><br><span class="line">蓝图与 C++ 的交互：UGameplayStatics 提供的方法可在蓝图中使用，方便设计师与程序员协作。</span><br></pre></td></tr></table></figure>

<h3 id="朝玩家移动"><a href="#朝玩家移动" class="headerlink" title="朝玩家移动"></a>朝玩家移动</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">APawn*PlayerPawn</span><br><span class="line">    PlayerPawn=Pawn</span><br></pre></td></tr></table></figure>



<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (PlayerPawn)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">// 获取玩家的位置</span></span><br><span class="line">	FVector PlayerLocation = PlayerPawn-&gt;<span class="built_in">GetActorLocation</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 设置当前 Actor 的位置，朝玩家位置移动</span></span><br><span class="line">	<span class="comment">// 这里可以使用简单的插值移动，或直接设置位置</span></span><br><span class="line">	FVector NewLocation = FMath::<span class="built_in">VInterpTo</span>(<span class="built_in">GetActorLocation</span>(), PlayerLocation, DeltaTime, <span class="number">2.0f</span>); <span class="comment">// 5.0f 是控制移动速度的因子</span></span><br><span class="line">	<span class="built_in">SetActorLocation</span>(NewLocation);</span><br><span class="line">       </span><br><span class="line">       <span class="comment">//旋转面朝玩家</span></span><br><span class="line">      `FRotator NewRotation = (PlayerLocation - <span class="built_in">GetActorLocation</span>()).<span class="built_in">Rotation</span>();</span><br><span class="line">	<span class="built_in">SetActorRotation</span>(NewRotation);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 Unreal Engine 中，有许多常用的类用于不同的游戏开发需求。以下是一些常见的重要类及其简要说明：</p>
<p>以下是将上述内容整理成表格的形式，以便更清晰地查看和比较这些Unreal Engine中常用的类及其简要说明：</p>
<table>
<thead>
<tr>
<th align="center">类名</th>
<th align="center">简要说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">AActor</td>
<td align="center">所有游戏对象的基类，可以放置在关卡中。它是所有可以在世界中被实例化的对象的基础。</td>
</tr>
<tr>
<td align="center">APawn</td>
<td align="center">表示一个可控制的游戏实体，可以是玩家角色或 AI 角色。提供移动和控制的功能。</td>
</tr>
<tr>
<td align="center">ACharacter</td>
<td align="center">APawn 的子类，适用于需要复杂移动（如跳跃、滑行等）的角色。它通常用于玩家角色，并集成了动画组件。</td>
</tr>
<tr>
<td align="center">APlayerController</td>
<td align="center">代表玩家的控制器，用于处理玩家输入、相机控制和与游戏逻辑的交互。</td>
</tr>
<tr>
<td align="center">AGameMode</td>
<td align="center">定义游戏规则、胜利条件以及玩家生成的逻辑。一个关卡只能有一个游戏模式。</td>
</tr>
<tr>
<td align="center">AGameState</td>
<td align="center">用于保存游戏的状态信息，允许所有客户端（在网络游戏中）访问相同的游戏状态数据。</td>
</tr>
<tr>
<td align="center">APlayerState</td>
<td align="center">存储与个别玩家（及其状态）相关的信息，比如分数、生命值等。每个玩家控制器都有一个对应的 APlayerState 实例。</td>
</tr>
<tr>
<td align="center">UComponent</td>
<td align="center">所有组件类的基类，用于给 Actor 添加功能（如运动、碰撞、渲染等）。</td>
</tr>
<tr>
<td align="center">UStaticMeshComponent</td>
<td align="center">用于在世界中显示静态网格（3D 模型），通常用于表示环境中的物体。</td>
</tr>
<tr>
<td align="center">USkeletalMeshComponent</td>
<td align="center">用于显示具有骨骼动画的网格，通常用于角色模型，允许其执行动画。</td>
</tr>
<tr>
<td align="center">UCapsuleComponent</td>
<td align="center">通常用于角色的碰撞检测，帮助其处理地面、墙壁等显示和逻辑。</td>
</tr>
<tr>
<td align="center">UAnimInstance</td>
<td align="center">动画实例类，用于控制角色的动画状态和过渡，允许开发者实现复杂的动画逻辑。</td>
</tr>
<tr>
<td align="center">UBlueprint</td>
<td align="center">可视化脚本系统，用于实现游戏逻辑，无需编写代码。它可以代表任何 Actor 类型，允许设计师和程序员协作。</td>
</tr>
<tr>
<td align="center">UTexture2D</td>
<td align="center">用于处理 2D 纹理，常用于界面元素或游戏对象的外观。</td>
</tr>
<tr>
<td align="center">USoundBase</td>
<td align="center">一个音频资产的基类，所有音效和背景音乐都从这个类派生。</td>
</tr>
<tr>
<td align="center">UMaterial</td>
<td align="center">用于定义表面属性和视觉效果的类，包括颜色、纹理和光照等。</td>
</tr>
<tr>
<td align="center">AEnvironment</td>
<td align="center">环境类，允许在环境中引入动态光源和其他视觉效果。</td>
</tr>
<tr>
<td align="center">UPhysicsComponent</td>
<td align="center">用于处理物理效果的组件，可以用于模拟重力、碰撞和其他物理现象。</td>
</tr>
</tbody></table>
<p>这个表格提供了Unreal Engine中一些常见和重要的类的快速概览，有助于理解这些类在游戏开发中的作用和关系。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">不一定非要将敌人数组放在游戏模式中，虽然游戏模式是一种常见的做法。根据你的游戏设计和需求，你可以选择以下几个比较适合的方案：</span><br><span class="line"></span><br><span class="line">游戏模式（GameMode）：</span><br><span class="line"></span><br><span class="line">如果敌人在整个游戏的不同关卡中都是共享的，你可以将敌人数组放在游戏模式中。这是一个便于全球管理敌人的方式。</span><br><span class="line">自定义关卡类（Level Script Actor）：</span><br><span class="line"></span><br><span class="line">如前所述，你可以创建一个自定义的关卡类（继承自 ALevelScriptActor），将敌人数组放在这个类中，这样你可以针对每个关卡进行特定的敌人管理。</span><br><span class="line">敌人生成器（Spawner）：</span><br><span class="line"></span><br><span class="line">如果你有复杂的敌人生成逻辑，可以创建一个独立的敌人生成器类来管理敌人。这可以让敌人生成和管理更加模块化。</span><br><span class="line">角色类（Character Class）：</span><br><span class="line"></span><br><span class="line">尽管不太常见，但如果你的角色需要跟特定的敌人进行交互或者影响，你可以在角色类中持有敌人数组。</span><br><span class="line">全局单例或管理器：</span><br><span class="line"></span><br><span class="line">如果你的游戏架构较为复杂，可以考虑使用单例模式或管理器类，它们可以在游戏中完成敌人的全局管理。</span><br><span class="line">总结</span><br><span class="line">虽然将敌人数组放在游戏模式是一个常见且有效的方案，但根据你的实际需求和游戏结构，你可以选择最适合你的方案。考虑到扩展性和代码组织，选择一个易于管理和维护的方法是很重要的。如果你有具体的场景或设计考虑，请告诉我，我可以提供更具体的建议！</span><br></pre></td></tr></table></figure>

<h3 id="遍历世界的物体"><a href="#遍历世界的物体" class="headerlink" title="遍历世界的物体"></a>遍历世界的物体</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">TArray&lt;AActor*&gt; ActorsToFind;</span><br><span class="line"><span class="keyword">if</span>(UWorld* World = <span class="built_in">GetWorld</span>())</span><br><span class="line">&#123;</span><br><span class="line">    UGameplayStatics::<span class="built_in">GetAllActorsOfClass</span>(<span class="built_in">GetWorld</span>(), AFireEffect::<span class="built_in">StaticClass</span>(), ActorsToFind);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (AActor* FireEffectActor: ActorsToFind)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Copyright Epic Games, Inc. All Rights Reserved.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;DemoCharacter.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Engine/LocalPlayer.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Camera/CameraComponent.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Components/CapsuleComponent.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameFramework/CharacterMovementComponent.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameFramework/SpringArmComponent.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameFramework/Controller.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;EnhancedInputComponent.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;EnhancedInputSubsystems.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;InputActionValue.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义日志类别</span></span><br><span class="line"><span class="built_in">DEFINE_LOG_CATEGORY</span>(LogTemplateCharacter);</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">// ADemoCharacter</span></span><br><span class="line"></span><br><span class="line">ADemoCharacter::<span class="built_in">ADemoCharacter</span>()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">// 设置碰撞胶囊的大小</span></span><br><span class="line">	<span class="built_in">GetCapsuleComponent</span>()-&gt;<span class="built_in">InitCapsuleSize</span>(<span class="number">42.f</span>, <span class="number">96.0f</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 不会因控制器旋转而旋转角色。让控制器只影响相机。</span></span><br><span class="line">	bUseControllerRotationPitch = <span class="literal">false</span>;</span><br><span class="line">	bUseControllerRotationYaw = <span class="literal">false</span>;</span><br><span class="line">	bUseControllerRotationRoll = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 配置角色移动</span></span><br><span class="line">	<span class="built_in">GetCharacterMovement</span>()-&gt;bOrientRotationToMovement = <span class="literal">true</span>; <span class="comment">// 角色向输入方向移动</span></span><br><span class="line">	<span class="built_in">GetCharacterMovement</span>()-&gt;RotationRate = <span class="built_in">FRotator</span>(<span class="number">0.0f</span>, <span class="number">500.0f</span>, <span class="number">0.0f</span>); <span class="comment">// 在该旋转速率下移动</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 注意：为了更快的迭代时间，这些变量和许多其他参数可以在角色蓝图中调整</span></span><br><span class="line">	<span class="comment">// 而无需重新编译</span></span><br><span class="line">	<span class="built_in">GetCharacterMovement</span>()-&gt;JumpZVelocity = <span class="number">700.f</span>; <span class="comment">// 跳跃时的竖直速度</span></span><br><span class="line">	<span class="built_in">GetCharacterMovement</span>()-&gt;AirControl = <span class="number">0.35f</span>; <span class="comment">// 空中控制能力</span></span><br><span class="line">	<span class="built_in">GetCharacterMovement</span>()-&gt;MaxWalkSpeed = <span class="number">500.f</span>; <span class="comment">// 最大行走速度</span></span><br><span class="line">	<span class="built_in">GetCharacterMovement</span>()-&gt;MinAnalogWalkSpeed = <span class="number">20.f</span>; <span class="comment">// 最小模拟行走速度</span></span><br><span class="line">	<span class="built_in">GetCharacterMovement</span>()-&gt;BrakingDecelerationWalking = <span class="number">2000.f</span>; <span class="comment">// 行走时刹车减速</span></span><br><span class="line">	<span class="built_in">GetCharacterMovement</span>()-&gt;BrakingDecelerationFalling = <span class="number">1500.0f</span>; <span class="comment">// 下落时刹车减速</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 创建相机弹簧臂（当发生碰撞时向玩家靠拢）</span></span><br><span class="line">	CameraBoom = <span class="built_in">CreateDefaultSubobject</span>&lt;USpringArmComponent&gt;(<span class="built_in">TEXT</span>(<span class="string">&quot;CameraBoom&quot;</span>));</span><br><span class="line">	CameraBoom-&gt;<span class="built_in">SetupAttachment</span>(RootComponent);</span><br><span class="line">	CameraBoom-&gt;TargetArmLength = <span class="number">400.0f</span>; <span class="comment">// 相机在角色后方跟随的距离</span></span><br><span class="line">	CameraBoom-&gt;bUsePawnControlRotation = <span class="literal">true</span>; <span class="comment">// 根据控制器旋转弹簧臂</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 创建跟随相机</span></span><br><span class="line">	FollowCamera = <span class="built_in">CreateDefaultSubobject</span>&lt;UCameraComponent&gt;(<span class="built_in">TEXT</span>(<span class="string">&quot;FollowCamera&quot;</span>));</span><br><span class="line">	FollowCamera-&gt;<span class="built_in">SetupAttachment</span>(CameraBoom, USpringArmComponent::SocketName); <span class="comment">// 将相机附加到弹簧臂的末端，并让弹簧臂根据控制器方向进行调整</span></span><br><span class="line">	FollowCamera-&gt;bUsePawnControlRotation = <span class="literal">false</span>; <span class="comment">// 相机不相对于弹簧臂旋转</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 注意：在继承的Mesh组件上，骨骼网格和动画蓝图的引用</span></span><br><span class="line">	<span class="comment">// 在名为ThirdPersonCharacter的派生蓝图资产中设置（以避免在C++中直接引用内容）</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ADemoCharacter::BeginPlay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 调用基类</span></span><br><span class="line">	Super::<span class="built_in">BeginPlay</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 添加输入映射上下文</span></span><br><span class="line">	<span class="keyword">if</span> (APlayerController* PlayerController = <span class="built_in">Cast</span>&lt;APlayerController&gt;(Controller))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (UEnhancedInputLocalPlayerSubsystem* Subsystem = ULocalPlayer::<span class="built_in">GetSubsystem</span>&lt;UEnhancedInputLocalPlayerSubsystem&gt;(PlayerController-&gt;<span class="built_in">GetLocalPlayer</span>()))</span><br><span class="line">		&#123;</span><br><span class="line">			Subsystem-&gt;<span class="built_in">AddMappingContext</span>(DefaultMappingContext, <span class="number">0</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">// 输入处理</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ADemoCharacter::SetupPlayerInputComponent</span><span class="params">(UInputComponent* PlayerInputComponent)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 设置动作绑定</span></span><br><span class="line">	<span class="keyword">if</span> (UEnhancedInputComponent* EnhancedInputComponent = <span class="built_in">Cast</span>&lt;UEnhancedInputComponent&gt;(PlayerInputComponent)) &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 跳跃</span></span><br><span class="line">		EnhancedInputComponent-&gt;<span class="built_in">BindAction</span>(JumpAction, ETriggerEvent::Started, <span class="keyword">this</span>, &amp;ACharacter::Jump);</span><br><span class="line">		EnhancedInputComponent-&gt;<span class="built_in">BindAction</span>(JumpAction, ETriggerEvent::Completed, <span class="keyword">this</span>, &amp;ACharacter::StopJumping);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 移动</span></span><br><span class="line">		EnhancedInputComponent-&gt;<span class="built_in">BindAction</span>(MoveAction, ETriggerEvent::Triggered, <span class="keyword">this</span>, &amp;ADemoCharacter::Move);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 视角控制</span></span><br><span class="line">		EnhancedInputComponent-&gt;<span class="built_in">BindAction</span>(LookAction, ETriggerEvent::Triggered, <span class="keyword">this</span>, &amp;ADemoCharacter::Look);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">UE_LOG</span>(LogTemplateCharacter, Error, <span class="built_in">TEXT</span>(<span class="string">&quot;&#x27;%s&#x27; 找不到增强输入组件！此模板是建立在增强输入系统上。如果您打算使用传统系统，则需要更新此C++文件。&quot;</span>), *<span class="built_in">GetNameSafe</span>(<span class="keyword">this</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ADemoCharacter::Move</span><span class="params">(<span class="type">const</span> FInputActionValue&amp; Value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 输入是一个Vector2D</span></span><br><span class="line">	FVector2D MovementVector = Value.<span class="built_in">Get</span>&lt;FVector2D&gt;();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (Controller != <span class="literal">nullptr</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 找出前方方向</span></span><br><span class="line">		<span class="type">const</span> FRotator Rotation = Controller-&gt;<span class="built_in">GetControlRotation</span>();</span><br><span class="line">		<span class="function"><span class="type">const</span> FRotator <span class="title">YawRotation</span><span class="params">(<span class="number">0</span>, Rotation.Yaw, <span class="number">0</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 获取前方向向量</span></span><br><span class="line">		<span class="type">const</span> FVector ForwardDirection = <span class="built_in">FRotationMatrix</span>(YawRotation).<span class="built_in">GetUnitAxis</span>(EAxis::X);</span><br><span class="line">	</span><br><span class="line">		<span class="comment">// 获取右方向向量 </span></span><br><span class="line">		<span class="type">const</span> FVector RightDirection = <span class="built_in">FRotationMatrix</span>(YawRotation).<span class="built_in">GetUnitAxis</span>(EAxis::Y);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 添加移动 </span></span><br><span class="line">		<span class="built_in">AddMovementInput</span>(ForwardDirection, MovementVector.Y); <span class="comment">// 前进/后退</span></span><br><span class="line">		<span class="built_in">AddMovementInput</span>(RightDirection, MovementVector.X); <span class="comment">// 左/右移动</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ADemoCharacter::Look</span><span class="params">(<span class="type">const</span> FInputActionValue&amp; Value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 输入是一个Vector2D</span></span><br><span class="line">	FVector2D LookAxisVector = Value.<span class="built_in">Get</span>&lt;FVector2D&gt;();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (Controller != <span class="literal">nullptr</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 将偏航和俯仰输入添加到控制器</span></span><br><span class="line">		<span class="built_in">AddControllerYawInput</span>(LookAxisVector.X); <span class="comment">// 左/右看</span></span><br><span class="line">		<span class="built_in">AddControllerPitchInput</span>(LookAxisVector.Y); <span class="comment">// 上/下看</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Copyright Epic Games, Inc. All Rights Reserved.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameFramework/Character.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Logging/LogMacros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;DemoCharacter.generated.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 前向声明类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">USpringArmComponent</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UCameraComponent</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UInputMappingContext</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UInputAction</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FInputActionValue</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明日志类别</span></span><br><span class="line"><span class="built_in">DECLARE_LOG_CATEGORY_EXTERN</span>(LogTemplateCharacter, Log, All);</span><br><span class="line"></span><br><span class="line"><span class="built_in">UCLASS</span>(config=Game)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ADemoCharacter</span> : <span class="keyword">public</span> ACharacter</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">GENERATED_BODY</span>()</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 相机弹簧臂，将相机定位在角色后方 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(VisibleAnywhere, BlueprintReadOnly, Category = Camera, meta = (AllowPrivateAccess = <span class="string">&quot;true&quot;</span>))</span><br><span class="line">	USpringArmComponent* CameraBoom;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 跟随相机 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(VisibleAnywhere, BlueprintReadOnly, Category = Camera, meta = (AllowPrivateAccess = <span class="string">&quot;true&quot;</span>))</span><br><span class="line">	UCameraComponent* FollowCamera;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/** 输入映射上下文 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadOnly, Category = Input, meta = (AllowPrivateAccess = <span class="string">&quot;true&quot;</span>))</span><br><span class="line">	UInputMappingContext* DefaultMappingContext;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 跳跃输入动作 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadOnly, Category = Input, meta = (AllowPrivateAccess = <span class="string">&quot;true&quot;</span>))</span><br><span class="line">	UInputAction* JumpAction;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 移动输入动作 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadOnly, Category = Input, meta = (AllowPrivateAccess = <span class="string">&quot;true&quot;</span>))</span><br><span class="line">	UInputAction* MoveAction;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 视角输入动作 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadOnly, Category = Input, meta = (AllowPrivateAccess = <span class="string">&quot;true&quot;</span>))</span><br><span class="line">	UInputAction* LookAction;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">ADemoCharacter</span>(); <span class="comment">// 构造函数</span></span><br><span class="line">	</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 处理移动输入的函数 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">Move</span><span class="params">(<span class="type">const</span> FInputActionValue&amp; Value)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 处理视角输入的函数 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">Look</span><span class="params">(<span class="type">const</span> FInputActionValue&amp; Value)</span></span>;</span><br><span class="line">			</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">	<span class="comment">// APawn 接口</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">SetupPlayerInputComponent</span><span class="params">(<span class="keyword">class</span> UInputComponent* PlayerInputComponent)</span> <span class="keyword">override</span></span>; <span class="comment">// 设置输入组件</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 添加映射上下文</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">BeginPlay</span><span class="params">()</span></span>; <span class="comment">// 初始化函数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">/** 返回 CameraBoom 子对象 **/</span></span><br><span class="line">	<span class="function">FORCEINLINE <span class="keyword">class</span> USpringArmComponent* <span class="title">GetCameraBoom</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> CameraBoom; &#125;</span><br><span class="line">	<span class="comment">/** 返回 FollowCamera 子对象 **/</span></span><br><span class="line">	<span class="function">FORCEINLINE <span class="keyword">class</span> UCameraComponent* <span class="title">GetFollowCamera</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> FollowCamera; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="类"><a href="#类" class="headerlink" title="类"></a>类</h1><h2 id="玩家类"><a href="#玩家类" class="headerlink" title="玩家类"></a>玩家类</h2><h3 id="角色移动组件-Pawn"><a href="#角色移动组件-Pawn" class="headerlink" title="角色移动组件:Pawn"></a>角色移动组件:Pawn</h3><ul>
<li><p>属性</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Velocity</td>
<td>速度</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p><font color= #FF6A6A>AddMovementInput</font></p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">AddMovementInput</span>(FVector WorldDirection, <span class="type">float</span> ScaleValue = <span class="number">1.0f</span>, <span class="type">bool</span> bForce = <span class="literal">false</span>)</span><br><span class="line"><span class="comment">//推荐移动角色方法,类似Velocity,也可以通过SetActorLocation实现</span></span><br></pre></td></tr></table></figure>

<h1 id="碰撞"><a href="#碰撞" class="headerlink" title="碰撞"></a>碰撞</h1><p>碰撞检测与命中测试（Overlap and Hit Test）<br>使用方法：为玩家角色或其攻击组件添加一个碰撞体（如Sphere Collision或Capsule Component），并启用重叠事件（Overlap Events）或使用线性投射（Line Trace）进行命中测试。<br>实现细节：在蓝图中，可以设置OnComponentBeginOverlap或OnComponentEndOverlap事件处理函数来检测玩家与敌人的碰撞。如果是C++，则需要覆写相关组件的OnComponentBeginOverlap或OnActorBeginOverlap等函数。<br>2. 视线投射（Raycast）<br>使用方法：当玩家按下攻击键时，从玩家视角发出一条射线（Raycast），检测这条射线是否击中了敌人。<br>实现细节：可以使用蓝图中的Line Trace By Channel节点，或者在C++中使用UKismetSystemLibrary::LineTraceSingleForObjects函数。根据返回的结果判断是否击中敌人，并获取击中对象的信息。<br>3. 感知系统（Sense Component）<br>使用方法：为敌人添加感知组件（Senses Component），定义它们的感知范围和条件，然后在玩家身上添加相应的标签（Tags）。敌人通过感知组件检查范围内是否有带有特定标签的玩家。<br>实现细节：配置敌人蓝图中的感知组件（如AIPerceptionComponent），并在玩家蓝图中设置相应的感知标签。通过感知委托处理感知到玩家的逻辑。<br>4. 基于脚本的行为树（Behavior Tree）<br>使用方法：创建一个行为树，其中包含一个用于寻找玩家节点（Find Player Node），该节点利用上述的碰撞检测或视线投射机制来定位玩家。<br>实现细节：在UE编辑器中设计行为树，使用蓝图或C++编写具体逻辑。例如，可以使用BTTask_FindPlayer节点，并在成功找到玩家后触发其他行为，如追击或攻击。<br>5. 事件调度器（Event Dispatchers）<br>使用方法：利用UE5的事件系统，在玩家到达特定位置或满足特定条件时，触发一个全局或局部事件，敌人对象监听这个事件并作出反应。<br>实现细节：可以创建自定义事件，在玩家达到某些条件时广播该事件。敌人蓝图或代码中注册监听这些事件，并执行相应的逻辑来响应玩家的动作</p>
<h1 id="变换向量"><a href="#变换向量" class="headerlink" title="变换向量"></a>变换向量</h1><h2 id="旋转"><a href="#旋转" class="headerlink" title="旋转"></a>旋转</h2><h3 id="GetUnitDirection-获取一个位置到一个位置的旋转向量"><a href="#GetUnitDirection-获取一个位置到一个位置的旋转向量" class="headerlink" title="GetUnitDirection      获取一个位置到一个位置的旋转向量"></a>GetUnitDirection      获取一个位置到一个位置的旋转向量</h3><p>目标相对位置&#x3D;向前向量乘以距离+自身XYz位置</p>
<p>平均旋转&#x3D;360除以箭头数量</p>
<p>箭头度数等于上一个箭头加上平均值</p>
<h1 id="用户控件"><a href="#用户控件" class="headerlink" title="用户控件"></a>用户控件</h1><p>当然，以下是 <code>UWidget</code> 类中部分 API 的用途翻译：</p>
<h3 id="渲染变换相关"><a href="#渲染变换相关" class="headerlink" title="渲染变换相关"></a>渲染变换相关</h3><ul>
<li><strong>GetRenderTransform</strong>: 获取小部件的渲染变换。</li>
<li><strong>SetRenderTransform</strong>: 设置小部件的渲染变换。</li>
<li><strong>SetRenderScale</strong>: 设置小部件的渲染缩放。</li>
<li><strong>SetRenderShear</strong>: 设置小部件的渲染剪切。</li>
<li><strong>SetRenderTransformAngle</strong>: 设置小部件的渲染旋转角度。</li>
<li><strong>GetRenderTransformAngle</strong>: 获取小部件的渲染旋转角度。</li>
<li><strong>SetRenderTranslation</strong>: 设置小部件的渲染平移。</li>
<li><strong>SetRenderTransformPivot</strong>: 设置小部件的渲染变换中心点。</li>
<li><strong>GetRenderTransformPivot</strong>: 获取小部件的渲染变换中心点。</li>
</ul>
<h3 id="流向方向偏好"><a href="#流向方向偏好" class="headerlink" title="流向方向偏好"></a>流向方向偏好</h3><ul>
<li><strong>GetFlowDirectionPreference</strong>: 获取小部件的流向方向偏好。</li>
<li><strong>SetFlowDirectionPreference</strong>: 设置小部件的流向方向偏好。</li>
</ul>
<h3 id="启用状态"><a href="#启用状态" class="headerlink" title="启用状态"></a>启用状态</h3><ul>
<li><strong>GetIsEnabled</strong>: 获取小部件当前的启用状态。</li>
<li><strong>SetIsEnabled</strong>: 设置小部件当前的启用状态。</li>
</ul>
<h3 id="是否在视口中"><a href="#是否在视口中" class="headerlink" title="是否在视口中"></a>是否在视口中</h3><ul>
<li><strong>IsInViewport</strong>: 返回小部件是否已通过 <code>AddToViewport</code> 或 <code>AddToPlayerScreen</code> 添加到视口中。</li>
</ul>
<h3 id="提示文本"><a href="#提示文本" class="headerlink" title="提示文本"></a>提示文本</h3><ul>
<li><strong>GetToolTipText</strong>: 获取小部件的提示文本。</li>
<li><strong>SetToolTipText</strong>: 设置小部件的提示文本。</li>
<li><strong>GetToolTip</strong>: 获取小部件的自定义提示小部件。</li>
<li><strong>SetToolTip</strong>: 设置小部件的自定义提示小部件。</li>
</ul>
<h3 id="鼠标光标"><a href="#鼠标光标" class="headerlink" title="鼠标光标"></a>鼠标光标</h3><ul>
<li><strong>GetCursor</strong>: 获取小部件上的鼠标光标。</li>
<li><strong>SetCursor</strong>: 设置小部件上的鼠标光标。</li>
<li><strong>ResetCursor</strong>: 重置小部件上的鼠标光标，移除任何自定义设置。</li>
</ul>
<h3 id="渲染状态"><a href="#渲染状态" class="headerlink" title="渲染状态"></a>渲染状态</h3><ul>
<li><strong>IsRendered</strong>: 返回小部件是否可见且渲染透明度大于 0。</li>
<li><strong>IsVisible</strong>: 返回小部件是否可见、命中测试不可见或自身命中测试不可见。</li>
<li><strong>GetVisibility</strong>: 获取小部件当前的可见性。</li>
<li><strong>SetVisibility</strong>: 设置小部件的可见性。</li>
<li><strong>SetVisibilityInternal</strong>: 内部方法，用于设置小部件的可见性。</li>
</ul>
<p>这些 API 主要用于控制和获取小部件的各种属性和状态，以便在用户界面中进行动态调整和响应。</p>
<p>提供的文件 <code>UserWidget.h</code> 是 Unreal Engine 5.3 版本中的一个头文件，定义了 <code>UUserWidget</code> 类。这个类是 Unreal Engine 中用于创建用户界面（UI）的基础类，支持通过蓝图（Blueprint）进行扩展。</p>
<h3 id="主要功能和特性："><a href="#主要功能和特性：" class="headerlink" title="主要功能和特性："></a>主要功能和特性：</h3><ul>
<li><strong>继承关系</strong>：<code>UUserWidget</code> 继承自 <code>UWidget</code> 和 <code>INamedSlotInterface</code>，提供了基本的 UI 功能和命名插槽接口。</li>
<li><strong>生命周期方法</strong>：<ul>
<li><code>OnInitialized</code>：初始化时调用，仅在游戏运行时调用一次。</li>
<li><code>PreConstruct</code>：构造前调用，适用于编辑器预览和运行时。</li>
<li><code>Construct</code>：Slate 小部件构造后调用。</li>
<li><code>Destruct</code>：Slate 小部件销毁时调用。</li>
</ul>
</li>
<li><strong>输入事件处理</strong>：<ul>
<li><code>OnFocusReceived</code>：获取焦点时调用。</li>
<li><code>OnFocusLost</code>：失去焦点时调用。</li>
<li><code>OnAddedToFocusPath</code>：添加到焦点路径时调用。</li>
<li><code>OnRemovedFromFocusPath</code>：从焦点路径中移除时调用。</li>
<li><code>OnKeyChar</code>：接收到字符输入时调用。</li>
<li><code>OnPreviewKeyDown</code>：预览按键按下事件。</li>
<li><code>OnKeyDown</code>：按键按下事件。</li>
<li><code>OnKeyUp</code>：按键释放事件。</li>
<li><code>OnAnalogValueChanged</code>：模拟值变化事件。</li>
<li><code>OnMouseButtonDown</code>：鼠标按钮按下事件。</li>
<li><code>OnPreviewMouseButtonDown</code>：预览鼠标按钮按下事件。</li>
<li><code>OnMouseButtonUp</code>：鼠标按钮释放事件。</li>
<li><code>OnMouseMove</code>：鼠标移动事件。</li>
<li><code>OnMouseEnter</code>：鼠标进入小部件时调用。</li>
<li><code>OnMouseLeave</code>：鼠标离开小部件时调用。</li>
<li><code>OnMouseWheel</code>：鼠标滚轮事件。</li>
</ul>
</li>
<li><strong>其他方法</strong>：<ul>
<li><code>AddToViewport</code>：将小部件添加到视口中。</li>
<li><code>AddToPlayerScreen</code>：将小部件添加到玩家屏幕。</li>
<li><code>SetPositionInViewport</code>：设置小部件在视口中的位置。</li>
<li><code>SetDesiredSizeInViewport</code>：设置小部件在视口中的大小。</li>
<li><code>SetAnchorsInViewport</code>：设置小部件在视口中的锚点。</li>
<li><code>SetAlignmentInViewport</code>：设置小部件在视口中的对齐方式。</li>
<li><code>SetVisibility</code>：设置小部件的可见性。</li>
<li><code>SetPlayerContext</code>：设置玩家上下文。</li>
<li><code>GetOwningLocalPlayer</code>：获取拥有该小部件的本地玩家。</li>
<li><code>GetOwningPlayer</code>：获取拥有该小部件的玩家控制器。</li>
<li><code>GetOwningPlayerPawn</code>：获取拥有该小部件的玩家角色。</li>
<li><code>GetOwningPlayerState</code>：获取拥有该小部件的玩家状态。</li>
<li><code>GetOwningPlayerCameraManager</code>：获取拥有该小部件的玩家相机管理器。</li>
</ul>
</li>
</ul>
<h3 id="枚举类型："><a href="#枚举类型：" class="headerlink" title="枚举类型："></a>枚举类型：</h3><ul>
<li><code>EWidgetTickFrequency</code>：定义了小部件的更新频率。</li>
<li><code>EWidgetAnimationEvent</code>：定义了动画事件类型。</li>
<li><code>EUMGSequencePlayMode</code>：定义了 UMG 序列的播放模式。</li>
<li><code>EDesignPreviewSizeMode</code>：定义了设计预览的尺寸模式。</li>
</ul>
<h3 id="结构体："><a href="#结构体：" class="headerlink" title="结构体："></a>结构体：</h3><ul>
<li><code>FAnimationEventBinding</code>：用于管理动画事件绑定。</li>
<li><code>FPaintContext</code>：用于绘制上下文。</li>
<li><code>FNamedSlotBinding</code>：用于命名插槽绑定。</li>
</ul>
<h3 id="其他："><a href="#其他：" class="headerlink" title="其他："></a>其他：</h3><ul>
<li><code>GetWorld</code>：获取当前世界。</li>
<li><code>PostDuplicate</code>：复制后调用。</li>
<li><code>BeginDestroy</code>：开始销毁时调用。</li>
<li><code>PostLoad</code>：加载后调用。</li>
<li><code>DuplicateAndInitializeFromWidgetTree</code>：从小部件树中复制并初始化。</li>
<li><code>Initialize</code>：初始化小部件。</li>
<li><code>GetDesiredTickFrequency</code>：获取期望的更新频率。</li>
<li><code>GetWidgetTreeOwningClass</code>：获取生成小部件树的蓝图类。</li>
<li><code>UpdateCanTick</code>：更新是否可以更新。</li>
</ul>
<p>这些功能和特性使得 <code>UUserWidget</code> 成为 Unreal Engine 中创建和管理用户界面的重要基础类。</p>
<h2 id="绑定UI和动画"><a href="#绑定UI和动画" class="headerlink" title="绑定UI和动画"></a>绑定UI和动画</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Fill out your copyright notice in the Description page of Project Settings.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Blueprint/UserWidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Components/SizeBox.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ItemBoxBase.generated.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//物品箱子,用于包裹小格子容器的组件,获取小格子组件事件发送出去</span></span><br><span class="line"><span class="built_in">UCLASS</span>()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TESTDEMO_API</span> UItemBoxBase : <span class="keyword">public</span> UUserWidget</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">GENERATED_BODY</span>()</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">// 小格子容器</span></span><br><span class="line">	<span class="comment">//UPROPERTY(BlueprintReadWrite,EditAnywhere)</span></span><br><span class="line">	<span class="comment">//USizeBox *sizebox;</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">NativePreConstruct</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">NativeConstruct</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//	// 小格子容器</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(BlueprintReadWrite,EditAnywhere,meta = (BindWidget))</span><br><span class="line">	USizeBox* sizebox;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 动画</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite, Category = <span class="string">&quot;Animations&quot;</span>)</span><br><span class="line">	UWidgetAnimation* ShowAnimation;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//绑定动画</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(BlueprintReadOnly, Transient, meta = (BindWidgetOptional) , meta = (BindWidgetAnim))</span><br><span class="line">	UWidgetAnimation* Fade;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="数据表格"><a href="#数据表格" class="headerlink" title="数据表格"></a>数据表格</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//读取行</span></span><br><span class="line"><span class="type">const</span> FFairyItemStruct* Row = DataTable-&gt;<span class="built_in">FindRow</span>&lt;FFairyItemStruct&gt;(RowName, ContextString);</span><br><span class="line"><span class="comment">//获取命名数组</span></span><br><span class="line">DataTable-&gt;<span class="built_in">GetRowNames</span>()</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="FTableRowBase-结构体"><a href="#FTableRowBase-结构体" class="headerlink" title="FTableRowBase 结构体"></a><code>FTableRowBase</code> 结构体</h3><h4 id="成员函数"><a href="#成员函数" class="headerlink" title="成员函数"></a>成员函数</h4><ul>
<li><p><strong><code>virtual void OnPostDataImport(const UDataTable* InDataTable, const FName InRowName, TArray&lt;FString&gt;&amp; OutCollectedImportProblems)</code></strong></p>
<ul>
<li>可以被子类重写；当数据表导入或重新导入时调用。</li>
<li>允许对初始读取的数据进行自定义修复、解析等操作。</li>
<li>参数：<ul>
<li><code>InDataTable</code>: 拥有此行的数据表。</li>
<li><code>InRowName</code>: 要进行修复的行的名称。</li>
<li><code>OutCollectedImportProblems</code>: 导入过程中累积的问题列表，可以通过此方法添加问题。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong><code>virtual void OnDataTableChanged(const UDataTable* InDataTable, const FName InRowName)</code></strong></p>
<ul>
<li>可以被子类重写；当拥有此行的数据表被修改时调用。</li>
<li>允许对用户更改进行自定义修复、解析等操作。</li>
<li>参数：<ul>
<li><code>InDataTable</code>: 拥有此行的数据表。</li>
<li><code>InRowName</code>: 要进行修复的行的名称。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="UDataTable-类"><a href="#UDataTable-类" class="headerlink" title="UDataTable 类"></a><code>UDataTable</code> 类</h3><h4 id="成员变量"><a href="#成员变量" class="headerlink" title="成员变量"></a>成员变量</h4><ul>
<li><p><strong><code>TObjectPtr&lt;UScriptStruct&gt; RowStruct</code></strong></p>
<ul>
<li>数据表中每一行使用的结构体，必须继承自 <code>FTableRowBase</code>。</li>
</ul>
</li>
<li><p><strong><code>TMap&lt;FName, uint8*&gt; RowMap</code></strong></p>
<ul>
<li>行名称到行数据结构的映射。</li>
</ul>
</li>
<li><p><strong><code>uint8 bStripFromClientBuilds : 1</code></strong></p>
<ul>
<li>如果设置为 <code>true</code>，则不会将此数据表打包到客户端构建中。适用于只有服务器需要知道的敏感表。</li>
</ul>
</li>
<li><p><strong><code>uint8 bIgnoreExtraFields : 1</code></strong></p>
<ul>
<li>如果设置为 <code>true</code>，则在导入数据时忽略多余的字段。否则会发出警告。</li>
</ul>
</li>
<li><p><strong><code>uint8 bIgnoreMissingFields : 1</code></strong></p>
<ul>
<li>如果设置为 <code>true</code>，则在导入数据时忽略预期但缺失的字段。否则会发出警告。</li>
</ul>
</li>
<li><p><strong><code>FString ImportKeyField</code></strong></p>
<ul>
<li>导入数据中的显式键字段。如果为空，则使用 JSON 中的 <code>Name</code> 或 CSV 中的第一个字段作为键。</li>
</ul>
</li>
<li><p><strong><code>TObjectPtr&lt;class UAssetImportData&gt; AssetImportData</code></strong></p>
<ul>
<li>导入此数据表的文件，可能为空。</li>
</ul>
</li>
<li><p><strong><code>FOnDataTableChanged OnDataTableChangedDelegate</code></strong></p>
<ul>
<li>当数据表发生变化时调用的多播委托。</li>
</ul>
</li>
</ul>
<h4 id="成员函数-1"><a href="#成员函数-1" class="headerlink" title="成员函数"></a>成员函数</h4><ul>
<li><p><strong><code>virtual void AddRowInternal(FName RowName, uint8* RowDataPtr)</code></strong></p>
<ul>
<li>向数据表中添加行。</li>
</ul>
</li>
<li><p><strong><code>virtual void RemoveRowInternal(FName RowName)</code></strong></p>
<ul>
<li>从数据表中删除行。</li>
</ul>
</li>
<li><p><strong><code>const TMap&lt;FName, uint8*&gt;&amp; GetRowMap() const</code></strong></p>
<ul>
<li>获取行映射。</li>
</ul>
</li>
<li><p><strong><code>const UScriptStruct* GetRowStruct() const</code></strong></p>
<ul>
<li>获取行结构体。</li>
</ul>
</li>
<li><p><strong><code>virtual bool AllowDuplicateRowsOnImport() const</code></strong></p>
<ul>
<li>返回是否允许在导入时存在多个同名行。</li>
</ul>
</li>
<li><p><strong><code>virtual void FinishDestroy()</code></strong></p>
<ul>
<li>完成销毁。</li>
</ul>
</li>
<li><p><strong><code>virtual void Serialize(FStructuredArchiveRecord Record)</code></strong></p>
<ul>
<li>序列化数据表。</li>
</ul>
</li>
<li><p><strong><code>static void AddReferencedObjects(UObject* InThis, FReferenceCollector&amp; Collector)</code></strong></p>
<ul>
<li>添加引用对象。</li>
</ul>
</li>
<li><p><strong><code>virtual void GetPreloadDependencies(TArray&lt;UObject*&gt;&amp; OutDeps)</code></strong></p>
<ul>
<li>获取预加载依赖项。</li>
</ul>
</li>
<li><p><strong><code>virtual void GetResourceSizeEx(FResourceSizeEx&amp; CumulativeResourceSize)</code></strong></p>
<ul>
<li>获取资源大小。</li>
</ul>
</li>
<li><p><strong><code>virtual bool NeedsLoadForClient() const</code></strong></p>
<ul>
<li>判断是否需要在客户端加载。</li>
</ul>
</li>
<li><p><strong><code>virtual bool NeedsLoadForEditorGame() const</code></strong></p>
<ul>
<li>判断是否需要在编辑器游戏中加载。</li>
</ul>
</li>
<li><p><strong><code>void HandleDataTableChanged(FName ChangedRowName = NAME_None)</code></strong></p>
<ul>
<li>当数据表数据发生变化时调用此方法，触发 <code>OnDataTableChanged</code> 委托和每行回调。</li>
</ul>
</li>
<li><p><strong><code>template &lt;class T&gt; void GetAllRows(const TCHAR* ContextString, OUT TArray&lt;T*&gt;&amp; OutRowArray) const</code></strong></p>
<ul>
<li>获取数据表中的所有行。</li>
</ul>
</li>
<li><p><strong><code>template &lt;class T&gt; T* FindRow(FName RowName, const TCHAR* ContextString, bool bWarnIfRowMissing = true) const</code></strong></p>
<ul>
<li>根据名称查找数据表中的行。</li>
</ul>
</li>
<li><p><strong><code>template &lt;class T&gt; void ForeachRow(const TCHAR* ContextString, TFunctionRef&lt;void (const FName&amp; Key, const T&amp; Value)&gt; Predicate) const</code></strong></p>
<ul>
<li>对每一行执行某个操作。</li>
</ul>
</li>
<li><p><strong><code>FProperty* FindTableProperty(const FName&amp; PropertyName) const</code></strong></p>
<ul>
<li>查找与列属性名称匹配的属性。</li>
</ul>
</li>
<li><p><strong><code>uint8* FindRowUnchecked(FName RowName) const</code></strong></p>
<ul>
<li>高性能版本，不进行类型检查。</li>
</ul>
</li>
<li><p><strong><code>virtual void EmptyTable()</code></strong></p>
<ul>
<li>清空数据表（不会清除 <code>RowStruct</code>）。</li>
</ul>
</li>
<li><p><strong><code>virtual TArray&lt;FName&gt; GetRowNames() const</code></strong></p>
<ul>
<li>获取所有行的名称。</li>
</ul>
</li>
<li><p><strong><code>virtual void RemoveRow(FName RowName)</code></strong></p>
<ul>
<li>通过名称删除单个行。</li>
</ul>
</li>
<li><p><strong><code>virtual void AddRow(FName RowName, const FTableRowBase&amp; RowData)</code></strong></p>
<ul>
<li>将行数据复制到数据表中。</li>
</ul>
</li>
<li><p><strong><code>virtual void CleanBeforeStructChange()</code></strong></p>
<ul>
<li>在结构体更改前清理。</li>
</ul>
</li>
<li><p><strong><code>virtual void RestoreAfterStructChange()</code></strong></p>
<ul>
<li>在结构体更改后恢复。</li>
</ul>
</li>
<li><p><strong><code>FString GetTableAsString(const EDataTableExportFlags InDTExportFlags = EDataTableExportFlags::None) const</code></strong></p>
<ul>
<li>将整个数据表输出为字符串。</li>
</ul>
</li>
<li><p><strong><code>FString GetTableAsCSV(const EDataTableExportFlags InDTExportFlags = EDataTableExportFlags::None) const</code></strong></p>
<ul>
<li>将整个数据表输出为 CSV 格式。</li>
</ul>
</li>
<li><p><strong><code>FString GetTableAsJSON(const EDataTableExportFlags InDTExportFlags = EDataTableExportFlags::None) const</code></strong></p>
<ul>
<li>将整个数据表输出为 JSON 格式。</li>
</ul>
</li>
<li><p><strong><code>template&lt;typename CharType = TCHAR&gt; bool WriteTableAsJSON(const TSharedRef&lt; TJsonWriter&lt;CharType, TPrettyJsonPrintPolicy&lt;CharType&gt; &gt; &gt;&amp; JsonWriter, const EDataTableExportFlags InDTExportFlags = EDataTableExportFlags::None) const</code></strong></p>
<ul>
<li>将整个数据表输出为 JSON 格式并写入 JSON 写入器。</li>
</ul>
</li>
<li><p><strong><code>template&lt;typename CharType = TCHAR&gt; bool WriteTableAsJSONObject(const TSharedRef&lt; TJsonWriter&lt;CharType, TPrettyJsonPrintPolicy&lt;CharType&gt; &gt; &gt;&amp; JsonWriter, const EDataTableExportFlags InDTExportFlags = EDataTableExportFlags::None) const</code></strong></p>
<ul>
<li>将整个数据表输出为 JSON 对象并写入 JSON 写入器。</li>
</ul>
</li>
<li><p><strong><code>template&lt;typename CharType = TCHAR&gt; bool WriteRowAsJSON(const TSharedRef&lt; TJsonWriter&lt;CharType, TPrettyJsonPrintPolicy&lt;CharType&gt; &gt; &gt;&amp; JsonWriter, const void* RowData, const EDataTableExportFlags InDTExportFlags = EDataTableExportFlags::None) const</code></strong></p>
<ul>
<li>将特定行的字段输出为 JSON 格式并写入 JSON 写入器。</li>
</ul>
</li>
<li><p><strong><code>bool CopyImportOptions(UDataTable* SourceTable)</code></strong></p>
<ul>
<li>复制另一个数据表的导入选项，不复制行数据。</li>
</ul>
</li>
<li><p><strong><code>TArray&lt;FString&gt; CreateTableFromCSVString(const FString&amp; InString)</code></strong></p>
<ul>
<li>从 CSV 格式的字符串创建数据表。</li>
</ul>
</li>
<li><p><strong><code>TArray&lt;FString&gt; CreateTableFromJSONString(const FString&amp; InString)</code></strong></p>
<ul>
<li>从 JSON 格式的字符串创建数据表。</li>
</ul>
</li>
<li><p><strong><code>TArray&lt;FString&gt; CreateTableFromOtherTable(const UDataTable* InTable)</code></strong></p>
<ul>
<li>从另一个数据表创建数据表。</li>
</ul>
</li>
<li><p><strong><code>TArray&lt;FString&gt; CreateTableFromRawData(TMap&lt;FName, const uint8*&gt;&amp; DataMap, UScriptStruct* InRowStruct)</code></strong></p>
<ul>
<li>从原始数据映射和给定的脚本结构创建数据表。</li>
</ul>
</li>
<li><p><strong><code>TArray&lt;FString&gt; GetColumnTitles() const</code></strong></p>
<ul>
<li>获取所有列标题，使用属性的友好显示名称。</li>
</ul>
</li>
<li><p><strong><code>TArray&lt;FString&gt; GetUniqueColumnTitles() const</code></strong></p>
<ul>
<li>获取所有列标题，使用属性的唯一名称。</li>
</ul>
</li>
<li><p><strong><code>TArray&lt; TArray&lt;FString&gt; &gt; GetTableData(const EDataTableExportFlags InDTExportFlags = EDataTableExportFlags::None) const</code></strong></p>
<ul>
<li>获取每个行的数据数组，第一行是标题。</li>
</ul>
</li>
<li><p><strong><code>void SaveStructData(FStructuredArchiveSlot Slot)</code></strong></p>
<ul>
<li>保存结构体数据。</li>
</ul>
</li>
<li><p><strong><code>void LoadStructData(FStructuredArchiveSlot Slot)</code></strong></p>
<ul>
<li>加载结构体数据。</li>
</ul>
</li>
<li><p><strong><code>void OnPostDataImported(OUT TArray&lt;FString&gt;&amp; OutCollectedImportProblems)</code></strong></p>
<ul>
<li>当新数据导入数据表时调用，通知每个导入的行，并给行结构体一个操作导入数据的机会。</li>
</ul>
</li>
<li><p><strong><code>UScriptStruct&amp; GetEmptyUsingStruct() const</code></strong></p>
<ul>
<li>获取空的结构体。</li>
</ul>
</li>
</ul>
<h3 id="FDataTableRowHandle-结构体"><a href="#FDataTableRowHandle-结构体" class="headerlink" title="FDataTableRowHandle 结构体"></a><code>FDataTableRowHandle</code> 结构体</h3><h4 id="成员变量-1"><a href="#成员变量-1" class="headerlink" title="成员变量"></a>成员变量</h4><ul>
<li><p><strong><code>TObjectPtr&lt;const UDataTable&gt; DataTable</code></strong></p>
<ul>
<li>指向我们要获取行的数据表。</li>
</ul>
</li>
<li><p><strong><code>FName RowName</code></strong></p>
<ul>
<li>我们要获取的行的名称。</li>
</ul>
</li>
</ul>
<h4 id="成员函数-2"><a href="#成员函数-2" class="headerlink" title="成员函数"></a>成员函数</h4><ul>
<li><p><strong><code>bool IsNull() const</code></strong></p>
<ul>
<li>如果此句柄未指向任何内容，返回 <code>true</code>。</li>
</ul>
</li>
<li><p><strong><code>template &lt;class T&gt; T* GetRow(const TCHAR* ContextString) const</code></strong></p>
<ul>
<li>从行句柄中获取行。</li>
</ul>
</li>
<li><p><strong><code>template &lt;class T&gt; T* GetRow(const FString&amp; ContextString) const</code></strong></p>
<ul>
<li>从行句柄中获取行。</li>
</ul>
</li>
<li><p><strong><code>FString ToDebugString(bool bUseFullPath = false) const</code></strong></p>
<ul>
<li>返回调试字符串。</li>
</ul>
</li>
<li><p><strong><code>bool operator==(FDataTableRowHandle const&amp; Other) const</code></strong></p>
<ul>
<li>判断两个行句柄是否相等。</li>
</ul>
</li>
<li><p><strong><code>bool operator!=(FDataTableRowHandle const&amp; Other) const</code></strong></p>
<ul>
<li>判断两个行句柄是否不相等。</li>
</ul>
</li>
<li><p><strong><code>void PostSerialize(const FArchive&amp; Ar)</code></strong></p>
<ul>
<li>序列化后调用。</li>
</ul>
</li>
</ul>
<h3 id="FDataTableCategoryHandle-结构体"><a href="#FDataTableCategoryHandle-结构体" class="headerlink" title="FDataTableCategoryHandle 结构体"></a><code>FDataTableCategoryHandle</code> 结构体</h3><h4 id="成员变量-2"><a href="#成员变量-2" class="headerlink" title="成员变量"></a>成员变量</h4><ul>
<li><p><strong><code>TObjectPtr&lt;const class UDataTable&gt; DataTable</code></strong></p>
<ul>
<li>指向我们要获取行的数据表。</li>
</ul>
</li>
<li><p><strong><code>FName ColumnName</code></strong></p>
<ul>
<li>我们要获取的列的名称。</li>
</ul>
</li>
<li><p><strong><code>FName RowContents</code></strong></p>
<ul>
<li>我们要获取的行的内容。</li>
</ul>
</li>
</ul>
<h4 id="成员函数-3"><a href="#成员函数-3" class="headerlink" title="成员函数"></a>成员函数</h4><ul>
<li><p><strong><code>bool IsNull() const</code></strong></p>
<ul>
<li>如果此句柄未指向任何内容，返回 <code>true</code>。</li>
</ul>
</li>
<li><p><strong><code>template &lt;class T&gt; void GetRows(TArray&lt;T*&gt;&amp; OutRows, const FString&amp; ContextString) const</code></strong></p>
<ul>
<li>在数据表中搜索所有包含 <code>RowContents</code> 的行，并将它们添加到 <code>OutRows</code> 中。</li>
</ul>
</li>
<li><p><strong><code>bool operator==(FDataTableCategoryHandle const&amp; Other) const</code></strong></p>
<ul>
<li>判断两个类别句柄是否相等。</li>
</ul>
</li>
<li><p><strong><code>bool operator!=(FDataTableCategoryHandle const&amp; Other) const</code></strong></p>
<ul>
<li>判断两个类别句柄是否不相等。</li>
</ul>
</li>
</ul>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="/img/touxiang.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="/img/touxiang.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">凝雨</div><div class="post-copyright__author_desc">人生得意须尽欢，莫使金樽空对月。</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2024/03/30/ue5/%E5%8F%98%E9%87%8F/API/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2024/03/30/ue5/%E5%8F%98%E9%87%8F/API/')">ue5API</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/img/ds.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="/img/ds.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/ds.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="/img/ds.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2024/03/30/ue5/%E5%8F%98%E9%87%8F/API/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=ue5API&amp;url=http://example.com/2024/03/30/ue5/%E5%8F%98%E9%87%8F/API/&amp;pic=https://files.wujicode.cn/w/open/dnf_universe_app/6ji052de.jpg?_r_=33d88012-e2cc-4f13-25c7-0925fac02644" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__category-list"><a class="post-meta__box__categoryes" href="/categories/ue5/"><span class="categoryes-punctuation"> <i class="anzhiyufont anzhiyu-icon-inbox"></i></span>ue5<span class="categoryesPageCount">8</span></a></div><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E5%AD%A6%E4%B9%A0/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>学习<span class="tagsPageCount">35</span></a><a class="post-meta__box__tags" href="/tags/%E5%8F%98%E9%87%8F/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>变量<span class="tagsPageCount">5</span></a></div></div><div class="post_share"><div class="social-share" data-image="https://files.wujicode.cn/w/open/dnf_universe_app/8n6PdXzn.jpg?_r_=8b75e67d-77cd-6587-1298-628eaddeba59" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/03/30/ue5/%E5%8F%98%E9%87%8F/GAS%E7%B3%BB%E7%BB%9F/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://vfiles.gtimg.cn/wuji_open/wupload/dnf_universe_data.picture_info/30b81227_k7iSWY_8Ks1.jpg?_r_=c22a2878-9399-aeb4-b19f-d094a4f8ec35" onerror="onerror=null;src='https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Gas系统笔记</div></div></a></div><div class="next-post pull-right"><a href="/2024/03/30/ue5/%E5%8F%98%E9%87%8F/AGS%E8%AF%BE%E7%A8%8B/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="/img/ww/D004.png" onerror="onerror=null;src='https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">AGS课程笔记</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2024/03/30/unity/%E6%80%AA%E7%89%A9%E8%B7%9F%E8%B8%AA%E7%8E%A9%E5%AE%B6/" title="怪物追玩家"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://vfiles.gtimg.cn/wuji_open/wupload/dnf_universe_data.picture_info/30b81227_k7iSWY_8Ks1.jpg?_r_=3f9c356a-4ab7-2923-6a78-973e9403bdd1" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-03-30</div><div class="title">怪物追玩家</div></div></a></div><div><a href="/2024/03/30/ue5/%E5%8F%98%E9%87%8F/AGS%E8%AF%BE%E7%A8%8B/" title="AGS课程笔记"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="/img/ww/D004.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-03-30</div><div class="title">AGS课程笔记</div></div></a></div><div><a href="/2024/03/30/ue5/%E5%8F%98%E9%87%8F/GAS%E7%B3%BB%E7%BB%9F/" title="Gas系统笔记"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://vfiles.gtimg.cn/wuji_open/wupload/dnf_universe_data.picture_info/30b81227_k7iSWY_8Ks1.jpg?_r_=c22a2878-9399-aeb4-b19f-d094a4f8ec35" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-03-30</div><div class="title">Gas系统笔记</div></div></a></div><div><a href="/2024/03/30/ue5/%E5%8F%98%E9%87%8F/%E6%A8%A1%E6%9D%BF/" title="ue5模板"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://vfiles.gtimg.cn/xy_open/wupload/xy/dnf_universe_app/FYhmnlzJ.jpg?_r_=3b129edc-29a7-bc24-18d7-fdeefafa501b" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-03-30</div><div class="title">ue5模板</div></div></a></div><div><a href="/2025/03/15/cpp/C++%E6%95%B0%E7%BB%84/" title="c++数组"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://files.wujicode.cn/w/open/dnf_universe_app/6ji052de.jpg?_r_=f1d8a345-3db3-18f7-872d-b2433e9c735e" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-15</div><div class="title">c++数组</div></div></a></div><div><a href="/2025/03/15/cpp/CMake/" title="Cmake"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://files.wujicode.cn/w/open/dnf_universe_app/PklBdp0O.jpg?_r_=2ae4c37b-0db8-ae86-a0a7-2cf251f8f870" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-15</div><div class="title">Cmake</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> Comment</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-switch"><span class="first-comment">Twikoo</span><span id="switch-btn"></span><span class="second-comment">Waline</span></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div><div><div id="waline-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="/img/touxiang.jpg" onerror="this.onerror=null;this.src='https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">凝雨</h1><div class="author-info__desc">人生得意须尽欢，莫使金樽空对月。</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/Luojiangbao015" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/253251579" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6"><span class="toc-number">1.</span> <span class="toc-text">组件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E9%9D%99%E6%80%81%E7%BD%91%E6%A0%BC%E4%BD%93%E8%B5%84%E6%BA%90"><span class="toc-number">2.</span> <span class="toc-text">加载静态网格体资源</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E9%AA%A8%E9%AA%BC%E7%BD%91%E6%A0%BC%E4%BD%93"><span class="toc-number">3.</span> <span class="toc-text">添加骨骼网格体</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%8E%A9%E5%AE%B6%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.1.</span> <span class="toc-text">获取玩家对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB-UGameplayStatics"><span class="toc-number">3.1.1.</span> <span class="toc-text">类:UGameplayStatics</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%9D%E7%8E%A9%E5%AE%B6%E7%A7%BB%E5%8A%A8"><span class="toc-number">3.1.2.</span> <span class="toc-text">朝玩家移动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%8D%E5%8E%86%E4%B8%96%E7%95%8C%E7%9A%84%E7%89%A9%E4%BD%93"><span class="toc-number">3.1.3.</span> <span class="toc-text">遍历世界的物体</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B1%BB"><span class="toc-number">4.</span> <span class="toc-text">类</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%A9%E5%AE%B6%E7%B1%BB"><span class="toc-number">4.1.</span> <span class="toc-text">玩家类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2%E7%A7%BB%E5%8A%A8%E7%BB%84%E4%BB%B6-Pawn"><span class="toc-number">4.1.1.</span> <span class="toc-text">角色移动组件:Pawn</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%A2%B0%E6%92%9E"><span class="toc-number">5.</span> <span class="toc-text">碰撞</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%98%E6%8D%A2%E5%90%91%E9%87%8F"><span class="toc-number">6.</span> <span class="toc-text">变换向量</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%8B%E8%BD%AC"><span class="toc-number">6.1.</span> <span class="toc-text">旋转</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#GetUnitDirection-%E8%8E%B7%E5%8F%96%E4%B8%80%E4%B8%AA%E4%BD%8D%E7%BD%AE%E5%88%B0%E4%B8%80%E4%B8%AA%E4%BD%8D%E7%BD%AE%E7%9A%84%E6%97%8B%E8%BD%AC%E5%90%91%E9%87%8F"><span class="toc-number">6.1.1.</span> <span class="toc-text">GetUnitDirection      获取一个位置到一个位置的旋转向量</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E6%8E%A7%E4%BB%B6"><span class="toc-number">7.</span> <span class="toc-text">用户控件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93%E5%8F%98%E6%8D%A2%E7%9B%B8%E5%85%B3"><span class="toc-number">7.0.1.</span> <span class="toc-text">渲染变换相关</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E5%90%91%E6%96%B9%E5%90%91%E5%81%8F%E5%A5%BD"><span class="toc-number">7.0.2.</span> <span class="toc-text">流向方向偏好</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E7%94%A8%E7%8A%B6%E6%80%81"><span class="toc-number">7.0.3.</span> <span class="toc-text">启用状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%AF%E5%90%A6%E5%9C%A8%E8%A7%86%E5%8F%A3%E4%B8%AD"><span class="toc-number">7.0.4.</span> <span class="toc-text">是否在视口中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E7%A4%BA%E6%96%87%E6%9C%AC"><span class="toc-number">7.0.5.</span> <span class="toc-text">提示文本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BC%A0%E6%A0%87%E5%85%89%E6%A0%87"><span class="toc-number">7.0.6.</span> <span class="toc-text">鼠标光标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93%E7%8A%B6%E6%80%81"><span class="toc-number">7.0.7.</span> <span class="toc-text">渲染状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD%E5%92%8C%E7%89%B9%E6%80%A7%EF%BC%9A"><span class="toc-number">7.0.8.</span> <span class="toc-text">主要功能和特性：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%EF%BC%9A"><span class="toc-number">7.0.9.</span> <span class="toc-text">枚举类型：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%EF%BC%9A"><span class="toc-number">7.0.10.</span> <span class="toc-text">结构体：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%EF%BC%9A"><span class="toc-number">7.0.11.</span> <span class="toc-text">其他：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%91%E5%AE%9AUI%E5%92%8C%E5%8A%A8%E7%94%BB"><span class="toc-number">7.1.</span> <span class="toc-text">绑定UI和动画</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%A0%BC"><span class="toc-number">8.</span> <span class="toc-text">数据表格</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#FTableRowBase-%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-number">8.0.1.</span> <span class="toc-text">FTableRowBase 结构体</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0"><span class="toc-number">8.0.1.1.</span> <span class="toc-text">成员函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UDataTable-%E7%B1%BB"><span class="toc-number">8.0.2.</span> <span class="toc-text">UDataTable 类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F"><span class="toc-number">8.0.2.1.</span> <span class="toc-text">成员变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0-1"><span class="toc-number">8.0.2.2.</span> <span class="toc-text">成员函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FDataTableRowHandle-%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-number">8.0.3.</span> <span class="toc-text">FDataTableRowHandle 结构体</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F-1"><span class="toc-number">8.0.3.1.</span> <span class="toc-text">成员变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0-2"><span class="toc-number">8.0.3.2.</span> <span class="toc-text">成员函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FDataTableCategoryHandle-%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-number">8.0.4.</span> <span class="toc-text">FDataTableCategoryHandle 结构体</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F-2"><span class="toc-number">8.0.4.1.</span> <span class="toc-text">成员变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0-3"><span class="toc-number">8.0.4.2.</span> <span class="toc-text">成员函数</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/03/15/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1/" title="游戏设计"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://files.wujicode.cn/w/open/dnf_universe_app/8n6PdXzn.jpg?_r_=8b75e67d-77cd-6587-1298-628eaddeba59" onerror="this.onerror=null;this.src='https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg'" alt="游戏设计"/></a><div class="content"><a class="title" href="/2025/03/15/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1/" title="游戏设计">游戏设计</a><time datetime="2025-03-15T02:03:30.012Z" title="Created 2025-03-15 10:03:30">2025-03-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/15/%E6%9D%82%E9%A1%B9/%E6%B8%B8%E6%88%8F%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="游戏源码解析"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://files.wujicode.cn/w/open/dnf_universe_app/rxIcYQoH.jpg?_r_=b7c11447-e60f-9b62-bd56-d72d2e915ee3" onerror="this.onerror=null;this.src='https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg'" alt="游戏源码解析"/></a><div class="content"><a class="title" href="/2025/03/15/%E6%9D%82%E9%A1%B9/%E6%B8%B8%E6%88%8F%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="游戏源码解析">游戏源码解析</a><time datetime="2025-03-15T02:03:30.008Z" title="Created 2025-03-15 10:03:30">2025-03-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/15/%E6%9D%82%E9%A1%B9/%E5%B0%8F%E8%AF%B4/" title="怪物猎人伤害"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://vfiles.gtimg.cn/wuji_open/wupload/dnf_universe_data.picture_info/30b81227_k7iSWY_8Ks1.jpg?_r_=e81b0085-ddf7-b417-09a1-22d92309412d" onerror="this.onerror=null;this.src='https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg'" alt="怪物猎人伤害"/></a><div class="content"><a class="title" href="/2025/03/15/%E6%9D%82%E9%A1%B9/%E5%B0%8F%E8%AF%B4/" title="怪物猎人伤害">怪物猎人伤害</a><time datetime="2025-03-15T02:03:30.005Z" title="Created 2025-03-15 10:03:30">2025-03-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/15/%E6%9D%82%E9%A1%B9/%E5%B0%8F%E8%AF%B4%20-%20%E5%89%AF%E6%9C%AC/" title="怪物猎人伤害"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://vfiles.gtimg.cn/xy_open/wupload/xy/dnf_universe_app/FYhmnlzJ.jpg?_r_=c70054a4-394b-4e2c-b11b-8f475df28849" onerror="this.onerror=null;this.src='https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg'" alt="怪物猎人伤害"/></a><div class="content"><a class="title" href="/2025/03/15/%E6%9D%82%E9%A1%B9/%E5%B0%8F%E8%AF%B4%20-%20%E5%89%AF%E6%9C%AC/" title="怪物猎人伤害">怪物猎人伤害</a><time datetime="2025-03-15T02:03:30.004Z" title="Created 2025-03-15 10:03:30">2025-03-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/15/%E6%9D%82%E9%A1%B9/%E4%BC%A4%E5%AE%B3%E8%AE%A1%E7%AE%97/" title="怪物猎人伤害"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://files.wujicode.cn/w/open/dnf_universe_app/qRlN5U00.jpg?_r_=929484eb-0ef4-4649-d2d7-391a8d96b0e7" onerror="this.onerror=null;this.src='https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg'" alt="怪物猎人伤害"/></a><div class="content"><a class="title" href="/2025/03/15/%E6%9D%82%E9%A1%B9/%E4%BC%A4%E5%AE%B3%E8%AE%A1%E7%AE%97/" title="怪物猎人伤害">怪物猎人伤害</a><time datetime="2025-03-15T02:03:30.002Z" title="Created 2025-03-15 10:03:30">2025-03-15</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:anzhiyu-c@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://weibo.com/u/6378063631" title="微博"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://www.facebook.com/profile.php?id=100092208016287&amp;sk=about" title="facebook"><i class="anzhiyufont anzhiyu-icon-facebook1"></i></a><a class="deal_link" href="/atom.xml" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="img/touxiang.jpg" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/Luojiangbao015" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/253251579" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://www.douyin.com/user/self?from_tab_name=main" title="抖音"><i class="anzhiyufont anzhiyu-icon-tiktok"></i></a><a class="deal_link" href="/copyright" title="CC"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i></a></div><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-上班摸鱼中.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"/><div id="runtimeTextTip"></div></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la统计" target="_blank" rel="noopener" href="https://v6.51.la/">51la统计</a><a class="footer-item" title="十年之约" target="_blank" rel="noopener" href="https://www.foreverblog.cn/">十年之约</a><a class="footer-item" title="开往" target="_blank" rel="noopener" href="https://github.com/travellings-link/travellings">开往</a></div></div><div class="footer-group"><div class="footer-title">主题</div><div class="footer-links"><a class="footer-item" title="文档" href="/docs/">文档</a><a class="footer-item" title="源码" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu">源码</a><a class="footer-item" title="更新日志" href="/update/">更新日志</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="即刻短文" href="/essay/">即刻短文</a><a class="footer-item" title="友链文章" href="/fcircle/">友链文章</a><a class="footer-item" title="留言板" href="/comments/">留言板</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://www.dogecloud.com/" style="margin-inline:5px" data-title="本站使用多吉云为静态资源提供CDN加速" title="本站使用多吉云为静态资源提供CDN加速"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/CDN-多吉云-3693F3.svg" alt="本站使用多吉云为静态资源提供CDN加速"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2025 By <a class="footer-bar-link" href="/" title="凝雨" target="_blank">凝雨</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://image.anheyu.com" title="图床">图床</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://beian.miit.gov.cn/" title="黔ICP备-4204490号">黔ICP备-4204490号</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">Articles</div><div class="length-num">37</div></a><a href="/tags/" title="tag"><div class="headline">Tags</div><div class="length-num">4</div></a><a href="/categories/" title="category"><div class="headline">Categories</div><div class="length-num">8</div></a></div><span class="sidebar-menu-item-title">Function</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="Display Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>Display Mode</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://space.bilibili.com/253251579" title="哔哩哔哩"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://th.bing.com/th?id=ODLS.1e67f861-d980-4c01-ba66-9450f90172f4&amp;w=32&amp;h=32&amp;qlt=96&amp;pcl=fffffc&amp;o=6&amp;cb=15&amp;pid=1.2" alt="哔哩哔哩"/><span class="back-menu-item-text">哔哩哔哩</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blender.kim/" title="魔酷网"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://th.bing.com/th?id=ODLS.88012746-d99b-4589-a17c-d5eeaad474fd&amp;w=32&amp;h=32&amp;qlt=99&amp;pcl=fffffc&amp;o=6&amp;cb=15&amp;pid=1.2" alt="魔酷网"/><span class="back-menu-item-text">魔酷网</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.aplaybox.com/" title="模之屋"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://th.bing.com/th?id=ODLS.221b96bc-0e7f-4f7d-b980-a051789b763b&amp;w=32&amp;h=32&amp;qlt=90&amp;pcl=fffffa&amp;o=6&amp;cb=15&amp;pid=1.2" alt="模之屋"/><span class="back-menu-item-text">模之屋</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://huaban.com/follow" title="花瓣"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://th.bing.com/th?id=ODLS.9e0310ad-0fa0-486f-8c12-81bcf016e199&amp;w=32&amp;h=32&amp;qlt=98&amp;pcl=fffffc&amp;o=6&amp;cb=15&amp;pid=1.2" alt="花瓣"/><span class="back-menu-item-text">花瓣</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.zhihu.com/people/35-4-25-32" title="知乎"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://files.wujicode.cn/w/open/dnf_universe_app/r4w7VxTy.jpeg&quot;" data-lazy-src="https://th.bing.com/th?id=ODLS.66059014-8637-4840-b8a6-78e2a6e07c34&amp;w=17&amp;h=17&amp;o=6&amp;cb=15&amp;pid=1.2" alt="知乎"/><span class="back-menu-item-text">知乎</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/htim/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/%E5%8F%98%E9%87%8F/" style="font-size: 0.88rem;">变量<sup>5</sup></a><a href="/tags/%E5%A4%87%E5%BF%98%E5%BD%95/" style="font-size: 0.88rem;">备忘录<sup>1</sup></a><a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">学习<sup>35</sup></a><a href="/tags/%E8%84%9A%E6%9C%AC/" style="font-size: 0.88rem;">脚本<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("15/03/2025 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2025 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 凝雨 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("15/03/2025 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-下班啦.svg";
        img.title = "下班了就该开开心心的玩耍，嘿嘿~";
        img.alt = "下班了就该开开心心的玩耍，嘿嘿~";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: '',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: '',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><script>(() => {
  let initFn = window.walineFn || null

  const initWaline = (Fn) => {
    const waline = Fn(Object.assign({
      el: '#waline-wrap',
      serverURL: '',
      pageview: false,
      dark: 'html[data-theme="dark"]',
      path: window.location.pathname,
      comment: false,
      imageUploader: true,
    }, null))

    const destroyWaline = () => {
      waline.destroy()
    }

    anzhiyu.addGlobalFn('pjax', destroyWaline, 'destroyWaline')
  }

  const loadWaline = async () => {
    if (initFn) initWaline(initFn)
    else {
      await getCSS('https://cdn.cbd.int/@waline/client@3.1.3/dist/waline.css')
      if (false) await getCSS('https://cdn.cbd.int/@waline/client@3.1.3/dist/waline-meta.css')
      const { init } = await import('https://cdn.cbd.int/@waline/client@3.1.3/dist/waline.js')
      initFn = init || Waline.init
      initWaline(initFn)
      window.walineFn = initFn
    }
  }

  if ('Twikoo' === 'Waline' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('waline-wrap'),loadWaline)
    else setTimeout(loadWaline, 0)
  } else {
    window.loadOtherComment = loadWaline
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[image]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[link]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[code]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: '',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "Unable to get the data, please make sure the settings are correct."
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += 'No Comment'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>